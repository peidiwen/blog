import{d as A,l as N,m as C,b as p,e as f,n as m,t as y,h,f as o,w as e,F as g,u as $,p as L,q as M,i as S,o as _,r as F,c as V,s as T,g as r,v as j,x as q,j as H,y as U}from"./index.16beb423.js";const I=["innerHTML"],J={class:"comment"},O={class:"submit"},z=r(" \u53D1\u8868 "),G=r("\u56DE\u590D"),K=r("\u53D1\u8868"),P=A({__name:"detail",setup(Q){const D=$(),B=N();let v=D.currentRoute.value.query.id;const t=C({commentValue:null,core:null});let a=C([{article:"null",co:"null",coid:null,core:[{coid:null,core:"null"}]}]),b=`/getdetail/?id=${v}`;p.get(b).then(s=>{a.value=s.data,a.value.forEach(l=>{l.showReply=!1})});function w(){t.value.commentValue!=null&&p.post("/addcomment",{comment:t.value.commentValue,id:v}).then(s=>{t.value.commentValue="",B.success("\u8BC4\u8BBA\u6210\u529F")})}function R(s){let l={id:v,coid:s,core:t.value.core},i=JSON.stringify(l);t.value.core!=null&&p.post("/addcore",{data:i}).then(x=>{t.value.core="",p.get(b).then(c=>{a.value=c.data,a.value.forEach(d=>{d.showReply=!1})}),B.success("\u56DE\u590D\u6210\u529F")})}return(s,l)=>{const i=j,x=L,c=M,d=q,k=S,E=H;return _(),f(g,null,[m("h1",null,y(h(a)[0].title),1),m("div",{class:"article",innerHTML:h(a)[0].article},null,8,I),m("div",J,[o(x,{label:"\u8BC4\u8BBA\uFF1A"},{default:e(()=>[o(i,{type:"textarea",disabled:"",value:t.value.commentValue,"onUpdate:value":l[0]||(l[0]=n=>t.value.commentValue=n),placeholder:"\u8BF4\u8BF4\u4F60\u7684\u770B\u6CD5"},null,8,["value"])]),_:1}),m("div",O,[o(c,{type:"primary",disabled:"",onClick:w},{default:e(()=>[z]),_:1})]),o(k,{vertical:""},{default:e(()=>[(_(!0),f(g,null,F(h(a),n=>(_(),V(d,{key:n.coid},{default:e(()=>[o(E,null,T({description:e(()=>[r(y(n.co),1)]),footer:e(()=>[o(c,{type:"primary",disabled:"",text:"",onClick:u=>n.showReply=!n.showReply},{default:e(()=>[G]),_:2},1032,["onClick"])]),default:e(()=>[(_(!0),f(g,null,F(n.core,u=>(_(),V(d,{key:u.coid},{default:e(()=>[r(y(u.core),1)]),_:2},1024))),128))]),_:2},[n.showReply?{name:"action",fn:e(()=>[o(i,{type:"textarea",value:t.value.core,"onUpdate:value":l[1]||(l[1]=u=>t.value.core=u)},null,8,["value"]),o(k,{justify:"end",style:{"margin-top":"15px"}},{default:e(()=>[o(c,{type:"primary",onClick:u=>R(n.coid)},{default:e(()=>[K]),_:2},1032,["onClick"])]),_:2},1024)]),key:"0"}:void 0]),1024)]),_:2},1024))),128))]),_:1})])],64)}}});const X=U(P,[["__scopeId","data-v-12321b6b"]]);export{X as default};
